/**
 * social-share-links-counters
 * @version 0.2.0
 */
!function(t){function e(e,s){this.element=e,this.$element=t(e),this.options=t.extend({},r,s),this._defaults=r,this._name=n,this.init()}var n="socialShareCounters",r={innerSpan:!0,showZero:!0,spanClass:n+"__counter"},s={},o=[{name:"twitter",host:/(www\.)?(twitter\.com)$/,shareParam:"url",counterUrl:"https://cdn.api.twitter.com/1/urls/count.json?url=",responseKey:"count"},{name:"facebook",host:/(www\.)?(facebook\.com)$/,shareParam:"u",counterUrl:"http://graph.facebook.com/?id=",responseKey:"shares"}];e.prototype={init:function(){"A"===this.element.tagName&&""!==this.element.search&&(this.options.innerSpan&&this.$element.data("span-class",this.options.spanClass),this.parseLink(this.element))},parseLink:function(t){for(var e=t.host,n=t.search.substring(1).split("&"),r=0;r<o.length;r++)if(o[r].host.test(e)&&!s[t.href]){for(var a={counter:0,provider:o[r]},i=0;i<n.length;i++){var h=n[i].split("=");if(o[r].shareParam===h[0]){a.url=h[1];break}}s[t.href]=a,this.getCounter(t,a)}},getCounter:function(e,n){var r=n.provider.counterUrl+n.url+"&callback=?",s=this.updateCounters,o=this.options;t.getJSON(r).done(function(t){var r=t[n.provider.responseKey];n.counter="number"!=typeof r?0:r,s(e,o)})},updateCounters:function(e,n){t('a[href="'+e.href+'"]').each(function(){var r=t(this),o=s[e.href],a=r.data("span-class");r.data("counter",o.counter),(n.showZero||0!==o.counter)&&a&&(0===r.find(a).length?r.append(t("<span>").addClass(a).text(o.counter)):r.find(a).text(o.counter))})}},t.fn[n]=function(r){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new e(this,r))})}}(jQuery,window,document);