/**
 * social-share-links-counters
 * @version 0.3.0
 */
!function(t){function e(e,r){this.element=e,this.$element=t(e),this.options=t.extend({},s,r),this._defaults=s,this._name=n,this.init()}var n="socialShareCounters",s={innerSpan:!0,spanClass:n+"__counter",showZero:!0},r={},o=[{name:"facebook",host:/(www\.)?(facebook\.com)$/,shareParam:"u",counterUrl:"http://graph.facebook.com/?id=",responseKey:"shares"}];e.prototype={init:function(){"A"===this.element.tagName&&""!==this.element.search&&(this.options.innerSpan&&this.$element.data("span-class",this.options.spanClass),this.parseLink(this.element))},parseLink:function(t){for(var e=t.host,n=t.search.substring(1).split("&"),s=0;s<o.length;s++)if(o[s].host.test(e)&&!r[t.href]){for(var a={counter:0,provider:o[s]},i=0;i<n.length;i++){var h=n[i].split("=");if(o[s].shareParam===h[0]){a.url=h[1];break}}r[t.href]=a,this.getCounter(t,a)}},getCounter:function(e,n){var s=n.provider.counterUrl+n.url+"&callback=?",r=this.updateCounters,o=this.options;t.getJSON(s).done(function(t){var s=t[n.provider.responseKey];n.counter="number"!=typeof s?0:s,r(e,o)})},updateCounters:function(e,n){t('a[href="'+e.href+'"]').each(function(){var s=t(this),o=r[e.href],a=s.data("span-class");s.data("counter",o.counter),(n.showZero||0!==o.counter)&&a&&(0===s.find(a).length?s.append(t("<span>").addClass(a).text(o.counter)):s.find(a).text(o.counter))})}},t.fn[n]=function(s){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new e(this,s))})}}(jQuery,window,document);